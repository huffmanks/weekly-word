---
import { getCollection } from "astro:content";

import { NUMBER_OF_HOMEPAGE_SERMONS, SITE_CONFIG } from "@constants";
import BaseLayout from "@layouts/BaseLayout.astro";

import ArrowCard from "@components/ArrowCard.astro";
import Container from "@components/Container.astro";
import Link from "@components/Link.astro";

const sermons = (await getCollection("sermons", ({ data }) => !data.draft))
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
  .slice(0, NUMBER_OF_HOMEPAGE_SERMONS);
---

<BaseLayout title={SITE_CONFIG.title} description={SITE_CONFIG.description}>
  <Container>
    <aside data-pagefind-ignore>
      <h1 class="font-semibold text-black dark:text-white">Introducing {SITE_CONFIG.title}</h1>
      <div class="space-y-16">
        <section>
          <article class="space-y-4">
            <div>
              <p>
                A personal space where I gather my sermon notes and reflections from each week.
                Whether you’re here to catch up on what I’ve been learning or just curious about
                some fresh spiritual insights, you’ll find simple, honest thoughts meant to inspire
                and encourage.
              </p>
            </div>
            <div class="animate">
              <p>Feel free to explore, reflect, and come back anytime for new weekly updates!</p>
            </div>
          </article>
        </section>

        <section class="animate space-y-6">
          <div class="flex flex-wrap items-center justify-between gap-y-2">
            <h2 class="font-semibold text-black dark:text-white">Latest sermons</h2>
            <Link href="/sermons">See all sermons</Link>
          </div>
          <ul class="not-prose flex flex-col gap-4">
            {
              sermons.map((sermon) => (
                <li>
                  <ArrowCard entry={sermon} />
                </li>
              ))
            }
          </ul>
        </section>

        <section class="animate space-y-4">
          <h2 class="font-semibold text-black dark:text-white">Get in touch</h2>
          <div>
            <p>
              Have a question, feedback or just want to say hi? Feel free to send me an email
              anytime. I’d love to hear from you.
            </p>
          </div>
          <div class="not-prose">
            <Link href={`mailto:${SITE_CONFIG.email}`} aria-label={`Email ${SITE_CONFIG.title}`}>
              {SITE_CONFIG.email}
            </Link>
          </div>
        </section>
      </div>
    </aside>
  </Container>
</BaseLayout>
